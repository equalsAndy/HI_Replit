# REPLIT AGENT: Simple Workshop Completion - Minimal Backend

## ðŸŽ¯ OBJECTIVE
Add TWO simple endpoints to support workshop completion - no complex middleware.

## ðŸ“‹ WHAT TO ADD

### File: `server/routes/workshop-data-routes.ts`

**Add these two endpoints at the end of the file (before the export):**

```typescript
// Get workshop completion status
workshopDataRouter.get('/completion-status', async (req, res) => {
  try {
    const userId = req.session?.userId;
    if (!userId) {
      return res.status(401).json({ error: 'Not authenticated' });
    }

    const user = await db.select({
      astWorkshopCompleted: users.astWorkshopCompleted,
      iaWorkshopCompleted: users.iaWorkshopCompleted,
      astCompletedAt: users.astCompletedAt,
      iaCompletedAt: users.iaCompletedAt
    }).from(users).where(eq(users.id, userId)).limit(1);

    if (!user[0]) {
      return res.status(404).json({ error: 'User not found' });
    }

    res.json(user[0]);
  } catch (error) {
    console.error('Error fetching completion status:', error);
    res.status(500).json({ error: 'Failed to fetch completion status' });
  }
});

// Mark workshop as completed
workshopDataRouter.post('/complete-workshop', async (req, res) => {
  try {
    const userId = req.session?.userId;
    const { appType } = req.body; // 'ast' or 'ia'

    if (!userId) {
      return res.status(401).json({ error: 'Not authenticated' });
    }

    if (!appType || !['ast', 'ia'].includes(appType)) {
      return res.status(400).json({ error: 'Invalid app type' });
    }

    // Simple completion - just mark as done
    const completionField = appType === 'ast' ? 'astWorkshopCompleted' : 'iaWorkshopCompleted';
    const timestampField = appType === 'ast' ? 'astCompletedAt' : 'iaCompletedAt';

    await db.update(users)
      .set({ 
        [completionField]: true,
        [timestampField]: new Date()
      })
      .where(eq(users.id, userId));

    res.json({ 
      success: true, 
      message: `${appType.toUpperCase()} workshop completed` 
    });
  } catch (error) {
    console.error('Error completing workshop:', error);
    res.status(500).json({ error: 'Failed to complete workshop' });
  }
});
```

**Add required imports at the top (if not already present):**
```typescript
import { eq } from 'drizzle-orm';
import { users } from '@/shared/schema';
```

## âœ… THAT'S IT!

**No middleware, no complex validation, just:**
- GET endpoint to check completion status
- POST endpoint to mark as completed
- Frontend will handle the rest

**Success Criteria:**
- Two new endpoints work
- Returns completion status correctly  
- Marks workshops as completed
- Simple and clean code